<p id="notice"><%= notice %></p>

<h1>Projects</h1>

<table class="table">
  <thead>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <tr>
      <th>Cover</th>
      <th>Name</th>
      <th>Link</th>
      <th>Owner</th>
      <th>Production Date</th>
      <th>Type</th>
      <th colspan="3">Actions</th>
    </tr>
  </thead>

  <%= form_tag projects_path, :method => "get" do %>
    <% Type.all.each do |type| %>
      <li>
      <%= label_tag(:search, type.TypeName) %>
      <%= check_box "search", "multibox", {:multiple => true }, type.TypeName, nil  %>
      </li>
    <% end %>
    <% Contribution.all.each do |cont| %>
      <li>
      <%= label_tag(:search, cont.ContributionType) %>
      <%= check_box "search", "multibox", {:multiple => true }, cont.ContributionType, nil  %>
      </li>
    <% end %>
    <%= submit_tag("Search", :name => nil) %>
  <% end %>

  <br><br>

  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td>

          <div class="card" style="width: 18rem;">
            <img src=
              <% if project.ProjectCover.representable? %>
                <%= image_tag project.ProjectCover.representation(resize_to_limit: [100, 100]) %>
              <% else %>
                <%= image_tag "https://via.placeholder.com/100", alt: "Download file" %>
              <% end %>
             class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title">
                <%= project.ProjectName %>
              </h5>
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              <a href="#" class="btn btn-primary">
                ><%= link_to "Link", project.ProjectLink, rel: 'noopener', target: '_blank' %>
              </a>
            </div>
          </div>

          <% if project.ProjectCover.representable? %>
            <%= image_tag project.ProjectCover.representation(resize_to_limit: [100, 100]) %>
          <% else %>
            <%= image_tag "https://via.placeholder.com/100", alt: "Download file" %>
          <% end %>
        </td>
        <td><%= project.ProjectName %></td>
        <td><%= link_to "Link", project.ProjectLink, rel: 'noopener', target: '_blank' %> </td>
        <td><%= project.ProjectOwner %></td>
        <td><%= project.ProjectEnd %></td>
        <td><%= Type.find(project.TypeID).TypeName %></td>
        <td><%= link_to 'Show', project, :class => "btn btn-primary" %></td>
        <td><%= link_to 'Edit', edit_project_path(project), :class => "btn btn-primary" %></td>
        <td><%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-primary" %></td>
      </tr>
    <% end %>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </tbody>
</table>

<br>

<%= link_to 'New Project', new_project_path %>
<br>
<%= link_to 'Types', types_path %>
<br>
<%= link_to 'Contributions', contributions_path %>
<br>
<%= link_to 'Awards', awards_path %>
<br>
<%= link_to 'Project Awards', awardeds_path %>
<br>
<%= link_to 'Display Lines', display_lines_path %>